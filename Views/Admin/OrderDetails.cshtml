@model WebApplicationIceCreamProject.Models.Order
@{
	ViewData["Title"] = "OrderDetails";
	Layout = "~/Views/Shared/_AdminLayout.cshtml";

}
<div class="shilat" style="height: 250px;">
	<div class="banner-content" >
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<div class="text-content text-center">
						<span>@*<i class="icon icon-calendar mr-2"></i>*@ADMIN</span>
						<h2>Order @Model.Id Details</h2>

						<div class="breadcum-items mt-2">
							@*      <span class="item color-primary" style="font-size: 15px;"><a asp-action="Home">Home /</a></span>
							<span class="item color-primary" style="font-size: 15px;">Flavors</span>

							*@
							<span class="item" style="font-size: 17px;"><a asp-action="OpenPage">Home /</a></span>
							<span class="item" style="font-size: 17px;"><a asp-action="OrdersList">Orders /</a></span>
							<span class="item colored" style=" font-size: 17px;">Details</span>

						</div>
						@* <br />*@

						@* <span class="item " style="font-size: 20px;">Treat Yourself to a Scoop of Happiness</span>
						*@ 
						<br />
						<span class="item color-primary"><a asp-action="EditOrder" asp-route-id="@Model.Id" style="font-size: 23px;">Edit Order @Model.Id</a></span>

					</div>
				</div>
			</div>
		</div>
	</div>
</div><!--site-banner-->
<section class="bg-sand padding-large">
	<div class="container">
		<div class="row">
			<div class="col-md-5">
				<dl class="row">
					<dt class="col-sm-2 colored" style="font-size: 20px;">
						<strong>@Html.DisplayNameFor(model => model.FirstName)</strong>
					</dt>
					<dd class="col-sm-10" style="font-size: 18px;">
						@Html.DisplayFor(model => model.FirstName)
					</dd>
					

					<dt class="col-sm-2 colored" style="font-size: 20px;">
						@Html.DisplayNameFor(model => model.LastName)
					</dt>
					<dd class="col-sm-10" style="font-size: 18px;">

						<a href="#" class="product-image">@Model.LastName</a>
					</dd>
				
					<dt class="col-sm-2 colored" style="font-size: 20px;">
						@Html.DisplayNameFor(model => model.PhoneNumber)
					</dt>
					<dd class="col-sm-10" style="font-size: 18px;">
						@Html.DisplayFor(model => model.PhoneNumber)
					</dd>
					
					<dt class="col-sm-2 colored" style="font-size: 20px;">
						@Html.DisplayNameFor(model => model.Email)
					</dt>
					<dd class="col-sm-10" style="font-size: 18px;">
						@Html.DisplayFor(model => model.Email)
					</dd>
					<dt class="col-sm-2 colored" style="font-size: 20px;">
						@Html.DisplayNameFor(model => model.City)
					</dt>
					<dd class="col-sm-10" style="font-size: 18px;">
						@Html.DisplayFor(model => model.City)
					</dd>
					<dt class="col-sm-2 colored" style="font-size: 20px;">
						@Html.DisplayNameFor(model => model.Street)
					</dt>
					<dd class="col-sm-10" style="font-size: 18px;">
						@Html.DisplayFor(model => model.Street)
					</dd>
					<dt class="col-sm-2 colored" style="font-size: 20px;">
						@Html.DisplayNameFor(model => model.HouseNumber)
					</dt>
					<dd class="col-sm-10" style="font-size: 18px;">
						@Html.DisplayFor(model => model.HouseNumber)
					</dd>
					<dt class="col-sm-2 colored" style="font-size: 20px;">
						@Html.DisplayNameFor(model => model.Date)
					</dt>
					<dd class="col-sm-10" style="font-size: 18px;">
						@Html.DisplayFor(model => model.Date)
					</dd>
						<dt class="col-sm-2 colored" style="font-size: 20px;">
						@Html.DisplayNameFor(model => model.Day)
					</dt>
					<dd class="col-sm-10" style="font-size: 18px;">
						@Html.DisplayFor(model => model.Day)
					</dd>
					<dt class="col-sm-2 colored" style="font-size: 20px;">
						@Html.DisplayNameFor(model => model.IsItHoliday)
					</dt>
					<dd class="col-sm-10" style="font-size: 18px;">
						@Html.DisplayFor(model => model.IsItHoliday)
					</dd>
					<dt class="col-sm-2 colored" style="font-size: 20px;">
						@Html.DisplayNameFor(model => model.Humidity)
					</dt>
					<dd class="col-sm-10" style="font-size: 18px;">
						@Html.DisplayFor(model => model.Humidity)
					</dd>
					<dt class="col-sm-2 colored" style="font-size: 20px;">
						@Html.DisplayNameFor(model => model.FeelsLike)
					</dt>
					<dd class="col-sm-10" style="font-size: 18px;">
						@Html.DisplayFor(model => model.FeelsLike)
					</dd>
					<dt class="col-sm-2 colored" style="font-size: 20px;">
						@Html.DisplayNameFor(model => model.Total)
					</dt>
					<dd class="col-sm-10" style="font-size: 18px;">
						@Html.DisplayFor(model => model.Total)
					</dd>
				</dl>
				
			</div>
			@*Id,FirstName,LastName,PhoneNumber,Email,Street,City,HouseNumber,Products,Date,FeelsLike,Humidity,IsItHoliday,Day,Total"*@

			<div class="col-md-7 pr-5">
				<div class="row">
					<form class="col-md-12" method="post">
						<div class="site-blocks-table">
							<table class="table table-bordered">
								<thead>
									<tr style="color: black;">
										<th class="product-thumbnail">Image</th>
										<th class="product-name">Flavour</th>
										<th>Price</th>
										<th class="product-size">Size</th>
										<th class="product-total">Total</th>

									</tr>
								</thead>
								<tbody>
									@foreach (var cartItem in Model.Products)
									{
										<tr data-product-id="@cartItem.FlavourId">
											<td class="product-thumbnail">
												<img src="~/images/loading.gif" alt="Image" class="img-fluid" width="100" height="100">
											</td>
											<td class="flavourName"></td>
											<td class="flavourPrice"></td>
											<td>@cartItem.Size liter</td>
											<td>@cartItem.Price.ToString("F2")</td>
										</tr>
									}
								</tbody>

								<script>
									$(document).ready(function () {
										$('tr[data-product-id]').each(function () {
											var row = $(this);
											var flavourId = row.data('product-id');
											var flavourNameCell = row.find('.flavourName');
											var flavourPriceCell = row.find('.flavourPrice');
											var imageCell = row.find('.product-thumbnail img');

											// Make an AJAX request to GetFlavourById
											$.ajax({
												url: '/Cart/GetFlavourById?id=' + flavourId, // Update with your controller and action route
												method: 'GET',
												dataType: 'json',
												success: function (data) {
													if (data) {
														// Populate the corresponding cells with the received data
														flavourNameCell.text(data.name);
														flavourPriceCell.text(data.price);
														var imageUrl = '../../images/' + data.image_URL;

														// Set the image source with the correct URL
														imageCell.attr('src', imageUrl);
													}
												},
												error: function () {
													// Handle error if needed
												}
											});
										});
									});
								</script>
							</table>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>



</section>
@*<script>
    $(document).ready(function () {
        $('tr[data-product-id]').each(function () {
            var row = $(this);
            var flavourId = row.data('product-id');
            var flavourNameCell = row.find('.flavour-name');
            var flavourPriceCell = row.find('.flavour-price');

            // Make an AJAX request to GetFlavourById
            $.ajax({
                url: '/Cart/GetFlavourById?id=' + flavourId, // Update with your controller and action route
                method: 'GET',
                dataType: 'html', // Change to 'html' if the response is HTML
                success: function (data) {
                    if (data) {
                        // Populate the corresponding cells with the received HTML
                        flavourNameCell.html(data);
                    }
                },
                error: function () {
                    // Handle error if needed
                }
            });
        });
    });
</script>
*@